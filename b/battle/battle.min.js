function load(){switch(clicks=0,window.location.hash.includes("#")&&"#endless"!=window.location.hash||(current=battles[Math.floor(Math.random()*battles.length)]),current.replace("+","")){case"aonarchy":case"alief":case"ammunist":case"alinar":case"eora":badNames.url="b",goodNames.url="a";break;default:badNames.url="b",goodNames.url="b"}if(void 0==ls["has"+current.toString().charAt(0).toUpperCase()+current.toString().substring(1).replace("+","")]&&(ls[goodNames[current][Math.floor(Math.random()*goodNames[current].length)]]="true",ls["has"+current.toString().charAt(0).toUpperCase()+current.toString().substring(1).replace("+","")]="true"),endless.w)b.name=ls.b1;else{var e=b.name;do{b.name=goodNames[current.replace("+","Boss")][Math.floor(Math.random()*goodNames[current.replace("+","Boss")].length)]}while(b.name==e)}endless.c=0;var t=a.name;do{a.name=badNames[current.replace("+","Boss")][Math.floor(Math.random()*badNames[current.replace("+","Boss")].length)]}while(a.name==t);for(;"false"==ls[b.name];)b.name=goodNames[current.replace("+","Boss")][Math.floor(Math.random()*goodNames[current.replace("+","Boss")].length)];if(a.health=bad[a.name].stats[1],a.attack=bad[a.name].stats[0],a.heal=bad[a.name].stats[2],b.health=good[b.name].stats[1],b.attack=good[b.name].stats[0],b.heal=good[b.name].stats[2],mob()?a.speed=300:a.speed=450,b.orig_health=b.health,a.orig_health=a.health,current.includes("+")){var l=["attack","health","speed","heal","orig_health"];for(i=0;i<l.length;i++)"speed"==l[i]?a.speed:a[l[i]]*=1.25}document.querySelector("#aHealth p").innerHTML=Math.round(a.health)+"/"+Math.round(a.orig_health),document.querySelector("#bHealth p").innerHTML=Math.round(b.health)+"/"+Math.round(b.orig_health),$("title").innerHTML=current;var r=new Image;r.onload=function(){$("bSection").style.backgroundImage="url(http://blib.tk/boc/bg/"+current.replace("+","")+".svg)",$("aSection").style.backgroundImage="url(http://blib.tk/boc/bg/"+current.replace("+","")+".svg)",$("aButton").style.backgroundColor="transparent",$("bButton").style.backgroundColor="transparent"},r.onerror=function(){$("bSection").style.backgroundImage="",$("aSection").style.backgroundImage="",$("aButton").style.backgroundColor="",$("bButton").style.backgroundColor=""},r.src="http://blib.tk/boc/bg/"+current.replace("+","")+".svg",$("refreshButton").style.display="",updateCharacter()}function updateCharacter(){var e=b.name;e=e.replace("D",".").replace("__","^").replace("--","^").replace("_"," ").replace("_"," ").replace("-"," ").replace("-"," ").replace("^","-").replace("Boss"," boss"),$("bName").innerHTML=e+" "+goodNames.url;var t=a.name;t=t.replace("D",".").replace("__","^").replace("--","^").replace("_"," ").replace("_"," ").replace("-"," ").replace("-"," ").replace("^","-").replace("Boss"," boss"),$("aName").innerHTML=t+" "+badNames.url,$("bButton").style.backgroundImage="url(http://blib.tk/boc/"+goodNames.url+"/"+b.name.toString().replace("_","-").replace("_","-").replace("_","-").replace("_","-").replace("D",".").replace("Boss","")+".png)",$("aButton").style.backgroundImage="url(http://blib.tk/boc/"+badNames.url+"/"+a.name.toString().replace("_","-").replace("_","-").replace("_","-").replace("_","-").replace("D",".").replace("Boss","")+".png)",$("bName").style.fontSize=(30-$("bName").innerHTML.length)/5+"vw",$("aName").style.fontSize=Math.min((30-$("aName").innerHTML.length)/5,$("bName").style.fontSize.replace("vw",""))+"vw",$("aName").style.fontSize.replace("vw","")<1&&($("aName").style.fontSize=parseFloat($("aName").style.fontSize.replace("vw",""))+.8+"vw"),$("bName").style.fontSize=Math.min((30-$("bName").innerHTML.length)/5,$("aName").style.fontSize.replace("vw",""))+"vw";var l="sword",r="sword";try{void 0!=bad[a.name.replace("--","__").replace("-","_").replace("-","_").replace("-","_")].info[5]&&(l=bad[a.name.replace("--","__").replace("-","_").replace("-","_").replace("-","_")].info[5])}catch(e){}try{void 0!=good[b.name.replace("--","__").replace("-","_").replace("-","_").replace("-","_")].info[5]&&(r=good[b.name.replace("--","__").replace("-","_").replace("-","_").replace("-","_")].info[5])}catch(e){}$("bSword").style.backgroundImage='url("http://blib.tk/boc/wpn/'+r+'.svg")',$("aSword").style.backgroundImage='url("http://blib.tk/boc/wpn/'+l+'.svg")'}function restart(){game.on="false",$("clickToStart").style.display="block",$("overlay").style.display="none",load()}function neatTime(e){var a=Math.floor(e/36e5),t=Math.floor(e/6e4)-60*a,l=Math.floor(e/1e3)-60*t;return a>0&&(l-=60*t),e="",a>=1&&(e=a+":"),t>=1&&(e+=t+":"),e+=l}var bSword,aSword,bgPos=0,a={name:"",health:0,attack:0,speed:0},b={name:"",health:0,attack:0},base,clicks=0,current=battles[Math.floor(Math.random()*battles.length)],endless={w:window.location.hash.includes("endless"),t:1,c:0,k:0};""!=window.location.hash&&"#endless"!=window.location.hash&&(current=window.location.hash.toString().replace("#","").replace("endless",""));var game={on:"false",refresh:{all:function(){$("bHealthBar").style.width=b.health/b.orig_health*100+"%",$("aHealthBar").style.width=a.health/a.orig_health*100+"%",window.requestAnimationFrame(game.refresh.all)}},win:function(e){if(endless.w)if("green"==e){endless.c=parseFloat(endless.c)+Math.round(Math.max(a.attack/b.attack*20,10)),endless.k++;var t=a.name;do{a.name=badNames[current.replace("+","Boss")][Math.floor(Math.random()*badNames[current.replace("+","Boss")].length)]}while(a.name==t);a.health=bad[a.name].stats[1],a.orig_health=a.health,a.attack=bad[a.name].stats[0],a.speed=450,a.heal=bad[a.name].stats[2],b.health=Math.min(b.orig_health,1.3*b.health),updateCharacter()}else{if(endless.t++,endless.t>ls.sc)return endless.c=Math.round(endless.c*endless.t),void 0==ls.redbacks?ls.redbacks=endless.c:ls.redbacks=parseFloat(ls.redbacks)+endless.c,$("overlayText").innerHTML='<div>GAME OVER</div><div id="overlayStats"><h5><span>'+endless.k+"</span>kls</h5><h5><span>"+neatTime((new Date).getTime()-base)+'</span>sec</h5><h5><img src="http://blib.tk/boc/img/rbo.svg"/>'+endless.c+"</h5><h5><span>"+clicks+"</span>clk</h5><h5><span>"+ls.sc+"</span>dth</h5></div>",$("restartText").setAttribute("ontouchend","location='../index.html'"),$("overlay").style.backgroundColor="#b30005",$("restartText").style.display="none",setTimeout(function(){$("restartText").style.display="block"},750),$("overlay").style.display="block",game.on="false",endless.t=1,void(endless.k=0);b.name=ls["b"+endless.t],b.health=good[b.name].stats[1],b.orig_health=b.health,b.attack=good[b.name].stats[0],b.heal=good[b.name].stats[2],updateCharacter()}else{if(game.on="false","green"==e){if(current.includes("+"))l=Math.round(Math.max(a.attack/b.attack*30,25));else var l=Math.round(Math.max(a.attack/b.attack*20,10));void 0==ls.redbacks?ls.redbacks=l:ls.redbacks=parseFloat(ls.redbacks)+l,$("overlayText").innerHTML='<div>VICTORY</div><div id="overlayStats"><h5><span>'+neatTime((new Date).getTime()-base)+'</span>sec</h5><h5><img src="http://blib.tk/boc/img/rbo.svg"/>'+l+"</h5><h5><span>"+clicks+"</span>clk</h5></div>",$("overlay").style.backgroundColor="#64DD17"}else $("overlayText").innerHTML='<div>DEFEAT</div><div id="overlayStats"><h5><span>'+neatTime((new Date).getTime()-base)+"</span>sec</h5><h5><span>"+clicks+"</span>clk</h5></div>",$("overlay").style.backgroundColor="#b30005";$("restartText").style.display="none",setTimeout(function(){$("restartText").style.display="block"},750),$("overlay").style.display="block",$("bSection").style.backgroundPosition="0% 80%",$("aSection").style.backgroundPosition="50% 80%",bgPos=0}},attack:function(e){if("true"==game.on){if("green"==e){a.health-=b.attack,a.health=Math.max(0,a.health),a.health=Math.min(a.orig_health,a.health);t=$("bSword").cloneNode(!0);$("bSword").parentNode.replaceChild(t,$("bSword")),$("bSword").style.display="block",$("bSword").style.animationName="bSword",$("clickToStart").style.display="none",clearTimeout(bSword),bSword=setTimeout("$('bSword').style.display = 'none';$('bSword').style.animationName = '';",150),clicks++,0==a.health&&game.win("green"),(bgPos-=10)<-window.innerWidth/4&&(bgPos=-window.innerWidth/4),$("bSection").style.backgroundPosition="calc(0% + "+bgPos+"px) 80%",$("aSection").style.backgroundPosition="calc(50% + "+bgPos+"px) 80%"}else if("red"==e){b.health-=a.attack,b.health=Math.max(0,b.health),b.health=Math.min(b.orig_health,b.health);var t=$("aSword").cloneNode(!0);$("aSword").parentNode.replaceChild(t,$("aSword")),$("aSword").style.display="block",$("aSword").style.animationName="aSword",clearTimeout(aSword),aSword=setTimeout("$('aSword').style.display = 'none';$('aSword').style.animationName = '';",100),0==b.health&&game.win("red"),(bgPos+=10)>0&&(bgPos=0),$("bSection").style.backgroundPosition="calc(0% + "+bgPos+"px) 80%",$("aSection").style.backgroundPosition="calc(50% + "+bgPos+"px) 80%"}document.querySelector("#aHealth p").innerHTML=Math.round(a.health)+"/"+Math.round(a.orig_health),document.querySelector("#bHealth p").innerHTML=Math.round(b.health)+"/"+Math.round(b.orig_health)}},heal:function(e){"true"==game.on&&("green"==e?(b.health+=b.heal,b.health=Math.max(0,b.health),b.health=Math.min(b.orig_health,b.health)):"red"==e&&(a.health+=a.heal,a.health=Math.max(0,a.health),a.health=Math.min(a.orig_health,a.health)))}};load(),setInterval('game.attack("red");game.heal("red")',a.speed),game.refresh.all(),document.body.ontouchmove=function(e){e.preventDefault()};